---
resources:

- name: automation
  type: git
  source:
    uri: https://github.com/mevansam/automation-pipelines.git
    branch: {{automation-pipeline-branch}}
    paths: 
    - pcf/bootstrap/**
    - pcf/install-pas/pipeline/gcp/**
    - pcf/install-pas/pipeline/tasks/**

jobs:
- name: bootstrap
  public: false
  plan:
  - aggregate:
    - get: automation
      trigger: true
  - task: configure
    file: automation/pcf/bootstrap/gcp/pipeline/task.yml
    params:
      IAAS_TYPE: {{iaas_type}}
      CONCOURSE_URL: {{concourse_url}}
      CONCOURSE_USER: {{concourse_user}}
      CONCOURSE_PASSWORD: {{concourse_password}}
      GOOGLE_PROJECT: {{google_project}}
      GOOGLE_CREDENTIALS_JSON: {{google_credentials_json}}
      GOOGLE_REGION: {{google_region}}
      BOOTSTRAP_STATE_BUCKET: {{bootstrap_state_bucket}}
      BOOTSTRAP_STATE_PREFIX: {{bootstrap_state_prefix}}
      PCF_PAS_RUNTIME_TYPE: {{pcf_pas_runtime_type}}
